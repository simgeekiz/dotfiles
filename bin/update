#!/usr/bin/env zsh
# Author: Simge Ekiz
# License: MIT 
#
# Update script for Linux and MacOS
# - updates the system packages;  
# - cleans up unnecessary packages;

magenta='\e[1;35m'
white='\e[0;37m'

# Since some programs are installed in non-root directories,
# don't run this script as root to avoid permission conflict.
if [[ $EUID -eq 0 ]]; then
    echo "Don't run this script as root"
    exit 1
fi


update_and_upgrade() {
  echo "${magenta}‚öôÔ∏è Updating Package List...${white}"
  sudo apt update

  echo -e "${magenta}‚¨ÜÔ∏è Upgrading System Packages (full-upgrade)...${white}"
  sudo apt full-upgrade -y
}

echo "${magenta}Updating and Upgrading System Packages.\nThis may take a while, please be patient...${white}"

# Autoremove unnecessary packages. Clean up the local repository of retrieved package files.
autoremove() {
  echo "${magenta}üóëÔ∏è Autoremoving Unnecessary Packages...${white}"
  sudo apt autoremove -y
  echo "${magenta}üßΩ Cleaning Up Local Repository... ${white}"
  sudo apt clean
}

case "$(uname)" in
  Darwin)
    # Make sure we‚Äôre using the latest Homebrew.
    brew update
    # Upgrade any already-installed formulae.
    brew upgrade
    ;;
  Linux)
    echo "Linux"
    update_and_upgrade
    autoremove
    ;;
  *)
    echo "‚ùå Unsupported OS: $(uname)"
    echo "‚ùó Please check if you are running this on a supported OS (Linux or macOS)."
    exit 0
    ;;
esac

